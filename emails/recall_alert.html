<!-- emails/recall_alert.html
     =============================================================
     Mobile‑responsive (but Outlook‑safe) HTML template used by
     backend/api/alerts/send_email_alert.py to notify a user that one or
     more of their tracked products have been recalled.

     Placeholders wrapped in double‑curly‑braces (Jinja‑style) are rendered
     server‑side before sending.
-->
<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>RecallGuard Alert</title>
    <!--[if mso]> <style type="text/css">body, table, td {font-family: Arial, sans-serif !important;} </style> <![endif]-->
    <style>
      /* Reset */
      body, table, td, a { -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; }
      table { border-collapse: collapse !important; }
      img { border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; }
      /* Base */
      body { margin: 0; padding: 0; width: 100% !important; background-color: #f6f8fa; }
      .wrapper { width: 100%; table-layout: fixed; background-color: #f6f8fa; padding: 30px 0; }
      .main { background-color: #ffffff; margin: 0 auto; width: 100%; max-width: 600px; border-radius: 6px; overflow: hidden; }
      .header { background-color: #24292f; padding: 20px; text-align: center; }
      .header h1 { margin: 0; color: #ffffff; font-size: 24px; font-weight: 600; }
      .content { padding: 30px 40px; color: #24292f; font-family: Arial, Helvetica, sans-serif; font-size: 16px; line-height: 1.5; }
      .product-table { width: 100%; margin-top: 20px; border: 1px solid #e1e4e8; }
      .product-table th { background-color: #f2f4f6; padding: 10px; text-align: left; font-size: 14px; }
      .product-table td { padding: 10px; font-size: 14px; border-top: 1px solid #e1e4e8; }
      .cta { display: block; margin: 30px auto 0; width: fit-content; background-color: #2da44e; color: #ffffff !important; padding: 12px 24px; font-weight: 600; text-decoration: none; border-radius: 4px; }
      .footer { padding: 20px; text-align: center; font-size: 12px; color: #57606a; }
      @media only screen and (max-width: 600px) {
        .content { padding: 20px !important; }
        .product-table th, .product-table td { font-size: 13px !important; }
      }
    </style>
  </head>
  <body>
    <center class="wrapper">
      <table class="main" role="presentation" cellpadding="0" cellspacing="0" width="100%">
        <tr>
          <td class="header">
            <h1>RecallGuard Alert</h1>
          </td>
        </tr>
        <tr>
          <td class="content">
            <p>Hi {{ user_first_name | default("there") }},</p>
            <p>We’ve detected <strong>{{ alert_count }}</strong> new recall{{ alert_count|pluralize }} that affect{{ alert_count|pluralize("s") }} product{{ alert_count|pluralize }} you’re tracking:</p>

            <table class="product-table" role="presentation" cellpadding="0" cellspacing="0">
              <thead>
                <tr>
                  <th style="width: 45%;">Product</th>
                  <th style="width: 25%;">Recall Date</th>
                  <th style="width: 30%;">Hazard</th>
                </tr>
              </thead>
              <tbody>
              {% for alert in alerts %}
                <tr>
                  <td>{{ alert.product_name }}</td>
                  <td>{{ alert.recall_date }}</td>
                  <td>{{ alert.hazard or "See details" }}</td>
                </tr>
              {% endfor %}
              </tbody>
            </table>

            <p>You can view details and recommended remedies in your dashboard.</p>

            <a href="{{ dashboard_url }}" class="cta">View Dashboard</a>

            <p style="margin-top: 30px;">Stay safe,<br/>The RecallGuard Team</p>
          </td>
        </tr>
        <tr>
          <td class="footer">
            You’re receiving this email because you opted in to RecallGuard notifications.<br/>
            <a href="{{ unsubscribe_url }}" style="color: #57606a;">Unsubscribe</a>
          </td>
        </tr>
      </table>
    </center>
  </body>
</html>